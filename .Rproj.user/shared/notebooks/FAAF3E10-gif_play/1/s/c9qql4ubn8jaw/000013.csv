"0","#for (frame_num in min(play_data$frame):max(play_data$frame)){"
"0","  "
"0",""
"0","get_dist_from_ball <- function(c_playId, c_time, df){"
"0",""
"0","  this_frame_data <- df %>% filter(playId == c_playId & time == c_time)"
"0","  "
"0","  c_ball_data <- this_frame_data[this_frame_data$displayName =='ball',]"
"0","  "
"0","  c_player_data <- this_frame_data[this_frame_data$displayName !='ball',]"
"0","  "
"0","  ball_x <- C_ball_data$x"
"0","  ball_y <- ball_data$y"
"0","  "
"0","  C_player_frame <- C_player_data %>% mutate(dist_from_ball = sqrt(((ball_x-x)^2)+((ball_y-y)^2)) )"
"0","  "
"0","  c_player_frame$has_ball = 0"
"0","  c_player_frame$closest_defender = 0"
"0","  "
"0","  min_dist_o = min(c_player_frame[c_player_frame$possessionFlag == 1,]$dist_from_ball)"
"0","  "
"0","  player_frame[c_player_frame$dist_from_ball == min_dist_o,]$has_ball = 1"
"0","  "
"0","  min_dist_d = min(c_player_frame[c_player_frame$possessionFlag == 0,]$dist_from_ball)"
"0",""
"0","  c_player_frame[c_player_frame$dist_from_ball == min_dist_d,]$closest_defender = 1"
"0","  "
"0","  "
"0","  "
"0","  c_player_frame <- select( player_frame, c('dist_from_ball', 'closest_defender', 'has_ball', 'playId', 'frame', 'displayName' ) )"
"0","  c_player_frame "
"0","}"
"0","#}"
