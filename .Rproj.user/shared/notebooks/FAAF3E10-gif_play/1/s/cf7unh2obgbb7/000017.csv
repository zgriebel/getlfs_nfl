"0","# * reduce dataset ----"
"0","reduced_play_data <- play_data %>% filter(frame >= first_frame, frame <= final_frame+10)"
"0",""
"0","# * get play details ----"
"0","play_desc <- reduced_play_data$playDescription %>% .[1]"
"0","play_dir <- reduced_play_data$playDirection %>% .[1]"
"0","yards_togo <- reduced_play_data$yardsToGo %>% .[1]"
"0","los <- reduced_play_data$absoluteYardlineNumber %>% .[1]"
"0","togo_line <- if(play_dir==""left"") los-yards_togo else los+yards_togo"
"0",""
"0","# * separate player and ball tracking data ----"
"0","player_data <- reduced_play_data %>% "
"0","select(frame, homeTeamFlag, teamAbbr, displayName, gsisId, jerseyNumber, position, positionGroup, possessionFlag, playId,"
"0","     x, y, s, o, dir, event) %>% "
"0","filter(displayName != ""ball"")"
"0","ball_data <- reduced_play_data %>% "
"0","select(frame, homeTeamFlag, teamAbbr, displayName, jerseyNumber, position, positionGroup,"
"0","     x, y, s, o, dir, event) %>% "
"0","filter(displayName == ""ball"")"
"0",""
"0",""
"0",""
"0","# * get team details ----"
"0","h_team <- reduced_play_data %>% filter(homeTeamFlag == 1) %>% distinct(teamAbbr) %>% pull()"
"0","a_team <- reduced_play_data %>% filter(homeTeamFlag == 0) %>% distinct(teamAbbr) %>% pull()"
"0","#  call helper function to get team colors"
"0","team_colors <- fetch_team_colors(h_team_ = h_team, a_team_ = a_team)"
"0","h_team_color1 <- team_colors[1]"
"0","h_team_color2 <- team_colors[2]"
"0","a_team_color1 <- team_colors[3]"
"0","a_team_color2 <- team_colors[4]"
